# Безопасные маршруты - Telegram Mini App

Telegram Mini App для построения безопасных пешеходных маршрутов с возможностью исключения запретных зон.

## Технологии

- **React + TypeScript** - UI фреймворк
- **Vite** - сборщик
- **@tma.js/sdk-react** - интеграция с Telegram Mini Apps
- **MapLibre GL** - карты
- **Яндекс.Карты** - тайлы карт
- **OpenRouteService** - маршрутизация с поддержкой avoid_polygons

## Установка

```bash
npm install
```

## Настройка

1. Создайте файл `.env` в корне проекта
2. Получите бесплатный API ключ на [OpenRouteService](https://openrouteservice.org/dev/#/signup)
3. Добавьте ключ в `.env`:

```
VITE_ORS_API_KEY=your_api_key_here
```

**Важно:** Без API ключа построение маршрутов не будет работать. В режиме разработки используется прокси Vite для обхода CORS.

## Запуск

```bash
npm run dev
```

## Функционал

- ✅ Построение маршрута от текущего местоположения до точки
- ✅ Построение маршрута от точки A до точки B
- ✅ Добавление запретных зон (круг заданного радиуса)
- ✅ Исключение запретных зон из маршрута
- ✅ Отображение маршрута и зон на карте
- ✅ Информация о расстоянии и времени маршрута

## Использование

1. Выберите режим маршрута: "От меня" или "От A до B"
2. Выберите точки на карте (кликом)
3. При необходимости добавьте запретные зоны
4. Нажмите "Построить маршрут"
5. Маршрут будет построен с учетом всех запретных зон

## Развертывание

### GitHub Pages (автоматический деплой)

1. Перейдите в Settings → Secrets and variables → Actions вашего репозитория
2. Добавьте секрет `VITE_ORS_API_KEY` с вашим API ключом OpenRouteService
3. Перейдите в Settings → Pages
4. В разделе "Source" выберите "GitHub Actions"
5. При каждом push в ветку `main` приложение автоматически соберется и задеплоится

### Ручной деплой

1. Соберите проект: `npm run build`
2. Загрузите файлы из `dist/` на хостинг (HTTPS обязателен)
3. Для GitHub Pages используйте: `npm run build:pages`

### Развертывание в Telegram

1. После деплоя на GitHub Pages получите URL (например: `https://codesanitar.github.io/kids-safe-routes/`)
2. Создайте бота через [@BotFather](https://t.me/BotFather)
3. Настройте Mini App через команду `/newapp` в BotFather
4. Укажите URL вашего приложения

